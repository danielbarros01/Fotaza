extends ../layout/index

block styles 
    meta(name="csrf-token" content= csrfToken)
    link(rel="stylesheet", href="/css/rating.css", attr)


block contenido
    include ../layout/header
    
    main
        div(class="flex justify-between mx-10 mt-10")
            div.w-16.border-2.border-principal-gray.cursor-pointer.shadow.flex
                img(src=userPost.image_url , alt="Imagen de perfil") 
                div(class="ml-3") 
                    p.font-bold= `${userPost.name } ${userPost.lastname }`
                    p.text-secondary-gray= userPost.username

            div.flex.items-center.relative
                a(href=`/publications/${publication.id}/download`) 
                    button#btnSendCategories(class="bg-principal-gray flex items-center justify-between hover:bg-secondary-gray h-11 w-40")
                        span.w-full.text-white Descargar
                        img(src="/img/project/download.svg", alt="").w-6.mr-2
                if user
                    button#btnOptions(class="bg-transparent")
                        img(src="/img/project/options.svg", alt="").w-8.ml-2
                    div#optionsPublication(class="hidden absolute bg-secondary-gray top-16 right-4 w-2/3 rounded-[10px] rounded-tr-[0px] p-3 shadow-md")
                        a(href=`/publications/${publication.id}/edit` class="flex justify-around items-center hover:transform hover:scale-110")
                            p.text-white Editar 
                            i(class="fa-solid fa-pen text-white")
                        hr.my-2
                        a(href=`/publications/${publication.id}/delete` class="flex justify-around items-center hover:transform hover:scale-110")  
                            p.text-red-700 Eliminar 
                            i(class="fa-solid fa-trash text-red-700")

        div(class="flex flex-col items-center mt-3") 
            div(class="flex justify-between items-center w-2/3 mb-2")
                h1(class="text-4xl text-secondary-gray font-bold")= publication.title 
                .rating.flex.gap-2
                    i(class="fa-solid fa-star star")
                    i(class="fa-solid fa-star star")
                    i(class="fa-solid fa-star star")
                    i(class="fa-solid fa-star star")
                    i(class="fa-solid fa-star star")
            
            div(class="w-2/3 flex justify-center")
                img(src=`/uploads/${publication.image}`, alt=`${publication.title}` style="max-height:500px")

        div.flex.justify-between.mx-10.my-4
            .category.flex.gap-4.items-center
                h3.font-bold.text-secondary-gray.text-2xl.underline= category.name
                each tag in tags
                    a(href="#") 
                        p(class="text-slate-500 bg-slate-200 w-24 rounded-lg text-center")= tag.name

            .rightOfUse.flex.items-center.relative
                div#infoRightOfUse(class="hidden absolute bottom-10 bg-secondary-gray text-xs p-2 text-polished-white rounded-[10px] rounded-br-[0px]")
                    p= rightOfUse.description
                p.text-principal-gray.text-xl.underline= rightOfUse.name
                img#btnInfoRightOfUse(src="/img/project/info.svg", alt="" class="ml-2 w-5 cursor-pointer")


    div#alertLogin(class="w-full h-screen fixed bottom-0 left-0 flex items-center justify-center bg-neutral-800 bg-opacity-40").hidden
        div(class="w-2/5 bg-white p-10 text-center relative")
            i#btnCloseAlertLogin(class="fa-solid fa-xmark absolute left-3 top-3 cursor-pointer")
            div 
                h4.font-medium.text-4xl.mb-2 Inicia Sesion 
                p Debes iniciar sesión para poder calificar la imagen
            a(href="/auth/login") 
                button#btnGoLogin(class="mt-10 bg-principal-gray hover:bg-secondary-gray h-11 w-52 m-auto text-polished-white") Ir a iniciar sesión

block scripts
    script(src="https://kit.fontawesome.com/e6a1497caa.js" crossorigin="anonymous")
    script(src="/js/rating.js")
    script(src="/js/clicksPublication.js")